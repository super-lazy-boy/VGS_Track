# VGST模型配置文件 - 用于自建RGB-D数据集训练
EXP_NAME: "vgst"

# 数据配置
DATA:
  MEAN: [0.485, 0.456, 0.406]  # ImageNet均值
  STD: [0.229, 0.224, 0.225]    # ImageNet标准差
  TEMPLATE:
    SIZE: 128                    # 模板图像大小
    FACTOR: 2.0                  # 模板区域因子
    CENTER_JITTER: 3.0           # 中心抖动
    SCALE_JITTER: 0.3            # 尺度抖动
    NUMBER: 1                    # 模板帧数量
  SEARCH:
    SIZE: 256                    # 搜索区域大小
    FACTOR: 4.0                  # 搜索区域因子
    CENTER_JITTER: 3.0           # 中心抖动
    SCALE_JITTER: 0.3            # 尺度抖动
    NUMBER: 1                    # 搜索帧数量
  TRAIN:
    DATASETS_NAME: ['Train']  # 训练数据集名称
    DATASETS_RATIO: [1]          # 数据集采样比例
    SAMPLE_PER_EPOCH: 60000      # 每epoch样本数
  MAX_SAMPLE_INTERVAL: 200       # 最大采样间隔
  MAX_SEQ_LENGTH: 100            # 最大序列长度
  SAMPLER_MODE: "causal"         # 采样模式

# 训练配置
TRAIN:
  EPOCH: 500                     # 训练轮数
  BATCH_SIZE: 16                 # 批次大小
  NUM_WORKER: 8                  # 数据加载工作进程数
  PRINT_INTERVAL: 50             # 打印间隔
  GRAD_CLIP_NORM: 0.1            # 梯度裁剪范数
  LR: 0.0001                     # 学习率
  WEIGHT_DECAY: 0.0001           # 权重衰减
  BACKBONE_MULTIPLIER: 0.1       # 骨干网络学习率乘子
  OPTIMIZER: "ADAMW"             # 优化器类型
  SCHEDULER:
    TYPE: "Mstep"                # 学习率调度器类型
    MILESTONES: [400]            # 学习率下降的epoch
    GAMMA: 0.1                   # 学习率下降比例
  DEEP_SUPERVISION: False        # 是否使用深度监督
  AMP: False                     # 是否使用自动混合精度
  FREEZE_BACKBONE_BN: True       # 是否冻结BN层
  TRAIN_CLS: False               # 是否只训练分类头
  GIOU_WEIGHT: 2.0               # GIOU损失权重
  L1_WEIGHT: 5.0                 # L1损失权重

# 模型配置
MODEL:
  PRETRAINED: ""                 # 预训练权重路径
  NUM_OBJECT_QUERIES: 1          # 目标查询数量
  HEAD_TYPE: "CORNER"            # 头部类型：CORNER角点预测
  HEAD_DIM: 256                  # 头部维度
  HIDDEN_DIM: 256                # 隐藏层维度
  POSITION_EMBEDDING: 'sine'     # 位置编码类型
  PREDICT_MASK: False            # 是否预测掩码
  INIT: 'trunc_norm'             # 权重初始化方法
  
  # 骨干网络配置
  BACKBONE:
    TYPE: 'resnet50'             # 骨干网络类型
    DILATION: False              # 是否使用空洞卷积
  
  # 语言模型配置
  LANGUAGE:
    TYPE: 'bert-base-uncased'    # BERT模型类型
    PATH: 'data/bert/bert-base-uncased'  # BERT模型路径
    VOCAB_PATH: 'data/bert/bert-base-uncased/vocab.txt'  # 词表路径
    BERT:
      HIDDEN_DIM: 768            # BERT隐藏维度
      MAX_QUERY_LEN: 40          # 最大查询长度
      ENC_NUM: 0                 # 编码器层数
      LR: 0.00001                # BERT学习率
  
  # Transformer配置
  TRANSFORMER:
    DROPOUT: 0.1                 # Dropout率
    NHEADS: 8                    # 注意力头数
    DIM_FEEDFORWARD: 2048        # 前馈网络维度
    ENC_LAYERS: 6                # 编码器层数
    FUS_LAYERS: 4                # 融合层数
    DEC_LAYERS: 6                # 解码器层数
    PRE_NORM: False              # 是否使用Pre-Norm
    DIVIDE_NORM: False           # 是否除以范数
  
  # 视觉语言Transformer配置
  VL:
    HIDDEN_DIM: 256              # 隐藏维度
    DROPOUT: 0.1                 # Dropout率
    NHEAD: 8                     # 注意力头数
    DIM_FEEDFORWARD: 2048        # 前馈网络维度
    ENC_LAYERS: 6                # 编码器层数
    NORM_BEFORE: False           # 是否在之前归一化
    ACTIVATION: 'relu'           # 激活函数
    INIT: 'trunc_norm'           # 初始化方法

# 环境配置
ENV:
  vgst_dir: 'VGST/data'  # 自建数据集路径